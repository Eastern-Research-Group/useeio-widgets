<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Sector Contribution to Impact</title>
    <link rel="stylesheet" type="text/css" href="widgets.css">
</head>


<body>
    <h1 id="graphTitle" class="text-center">Top 10 Sectors based on Total Embodied GHG Emissions</h1>
    <div style=" display: flex; flex-direction: column;height: 85vh;">
        <div style=" flex-grow: 1;">
                    <div id="smart-sector-eeio">
                    </div>
        </div>
        <div style=" flex-grow: 1;">
            <div style=" display: flex; flex-direction: row;">
                <div style=" margin-left: 20px;">
                    <label for="grap-selected">Select Metric (GWP or SCC):</label>
                    <br>
                    <select id="my-select" onchange="changeGraph(this.value)">
                        <option value="GWP-AR6-20" >20yr GWP </option>
                        <option value="GWP-AR6-100" selected>100yr GWP</option>
                        <option value="Social-Cost-of-Carbon">Social Cost of Carbon</option>
                    </select>
                </div>
                <div style=" margin-left: 20px;">
                    <label for="grap-selected">Allocation of Indirect Emissions:</label>
                    <br>
                    <input type="radio" name="myRadios" value="final" checked/> Final
                    <input type="radio" name="myRadios" value="direct" /> Direct
                </div>
                <div style=" margin-left: 20px;">
                    <label for="grap-selected">Top Sectors </label>
                    <br>
                    <select id="my-select" onchange="toggleNumSelection(this.value)">
                        <option value=25 >25</option>
                        <option value=10 selected>10</option>
                    </select>
                </div>
        </div>
        </div>
        
    </div>
    
   

    <script src="lib/apexcharts.min.js"></script>
    <script src="lib/useeio_widgets.js"></script>
    <script>
        var perspectiveName = 'final';
        var graphType = 'GWP-AR6-100';
        var config = useeio.urlConfig();
        var modelID = config.get().model || 'SMART_SECTORv1.0';

        var model = useeio.model({
            endpoint: './api',
            model: modelID,
            asJsonFiles: true,
        });

        var smartSectorChart = useeio.smartSectorChart({
            model: model,
            endpoint: './api',
            selector: '#smart-sector-eeio',
        });
        smartSectorChart.init(graphType);

    function changeGraph(t)
            {
                smartSectorChart.selectiveGraph(t,perspectiveName);
                graphType = t;
            }

    function toggleNumSelection(n)
            {
                smartSectorChart.selectiveGraph(graphType,perspectiveName,n);
                
            }

            document.addEventListener('input',(e)=>{
                if(e.target.getAttribute('name')=="myRadios")
                {
                    perspectiveName = e.target.value
                    changeGraph(graphType);

                }
            })
</script>
</body>

</html>
