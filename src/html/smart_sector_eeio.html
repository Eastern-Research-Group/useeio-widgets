<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Sector Contribution to Impact</title>
    <link rel="stylesheet" type="text/css" href="widgets.css">
</head>


<body>
    <h1 id="graphTitle" class="text-center">Top 10 Sectors based on Total Embodied GHG Emissions</h1>

    <div style=" margin-left: 20px;">
    <label for="grap-selected">Select Metric (GWP or SCC):</label>
    <br>
    <select id="my-select" onchange="changeGraph(this.value)">
        <option value="GWP-AR6-20" >20yr GWP </option>
        <option value="GWP-AR6-100" selected>100yr GWP</option>
        <option value="Social-Cost-of-Carbon">Social Cost of Carbon</option>
     </select>
    </div>
    <div class="io" id="activeGraph" name="20" style="display: block;">
        <div style="width: 100%; margin: auto;">
            <div id="smart-sector-eeio">
            </div>
        </div>
    </div>


    <div style=" margin-left: 20px;">
    <label for="grap-selected">Allocation of Indirect Emissions:</label>
    <br>
    <input type="radio" name="myRadios" value="final" checked/> Final
    <input type="radio" name="myRadios" value="direct" /> Direct
    </div>

    <script src="lib/apexcharts.min.js"></script>
    <script src="lib/useeio_widgets.js"></script>
    <script>

        var config = useeio.urlConfig();
        var modelID = config.get().model || 'SMART_SECTORv1.0';

        var model = useeio.model({
            endpoint: './api',
            model: modelID,
            asJsonFiles: true,
        });

        var smartSectorChart = useeio.smartSectorChart({
            model: model,
            endpoint: './api',
            selector: '#smart-sector-eeio',
        });
        smartSectorChart.init('GWP-AR6-100');

    var perspectiveName = 'final';
    var graphType = 'GWP-AR6-100';
    function changeGraph(t)
            {
                smartSectorChart.selectiveGraph(t,perspectiveName);
                graphType = t;
            }

            document.addEventListener('input',(e)=>{
                if(e.target.getAttribute('name')=="myRadios")
                {
                    perspectiveName = e.target.value
                    changeGraph(graphType);

                }
            })
</script>
</body>

</html>
